rules_version = '2';
service firebase.storage {
  match /b/{bucket}/o {
    // Evidence uploads: /evidence/{disputeId}/{filename}
    match /evidence/{disputeId}/{fileName} {
      allow read: if false;  // Server-side only via Admin SDK
      allow write: if false; // Server-side only via Admin SDK
    }

    // Delivery proof: /deliveries/{jobId}/{fileName}
    match /deliveries/{jobId}/{fileName} {
      allow read: if false;
      allow write: if false;
    }

    // Profile images: /profile-images/{fileName}
    // Public read via makePublic(), writes via Admin SDK only
    match /profile-images/{fileName} {
      allow read: if false;
      allow write: if false;
    }

    // Deny everything else
    match /{allPaths=**} {
      allow read, write: if false;
    }
  }
}
